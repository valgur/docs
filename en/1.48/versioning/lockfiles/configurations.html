



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Multiple configurations &mdash; conan 1.48.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../_static/css/search.css" type="text/css" />
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="conan 1.48.2 documentation" href="../../index.html"/>
        <link rel="up" title="Lockfiles" href="../lockfiles.html"/>
        <link rel="next" title="Evolving lockfiles" href="evolving.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/>

 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
 



</script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/conan-logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../versioning.html">Versioning</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction to versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_ranges.html">Version ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../revisions.html">Package Revisions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../lockfiles.html">Lockfiles</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Multiple configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#base-lockfiles">Base lockfiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#locked-configuration">Locked configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="evolving.html">Evolving lockfiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="build_order.html">Build order in lockfiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="bundle.html">Lockfile bundles</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci.html">Lockfiles in Continuous Integration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conan_v2.html">Conan migration guide to 2.0</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p><a href="https://conan.io/#signUp" target="_blank">Sign up for release updates</a></p>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div class="admonition important wy-text-center">
            <p>This document is for a <b>"1.X"</b> Conan version. <a href="https://docs.conan.io/2/">Click here to see the Conan 2.0 documentation</a></p>
          </div>
                 
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../versioning.html">Versioning</a> &raquo;</li>
        
          <li><a href="../lockfiles.html">Lockfiles</a> &raquo;</li>
        
      <li>Multiple configurations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/versioning/lockfiles/configurations.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->
          <!--<div class="admonition important">
            <p class="admonition-title">Announcement</p>
            <p>Recipe Hacking no. 2! Building on what we learnt during the first installment we will be working on more Conan 2.0 Migration! We'll start by reviewing some open pull requests and hopefully tackle a CMake example. <a
            href=https://jfrog.zoom.us/webinar/register/WN_grFhqH0yRBeIfJmBvQoPJw> Register here to attend.</a></p>
          </div>-->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="multiple-configurations">
<span id="versioning-lockfiles-configurations"></span><h1>Multiple configurations<a class="headerlink" href="#multiple-configurations" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is an <strong>experimental</strong> feature subject to breaking changes in future releases.</p>
</div>
<p>In the previous section we managed just 1 configuration, for the default profile. In many applications,
packages need to be built with several different configurations, typically managed by different profile
files.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This section continues with the previous example with the <a class="reference internal" href="introduction.html#versioning-lockfiles-introduction"><span class="std std-ref">Introduction</span></a>.
The code used in this section, including a <em>build.py</em> script to reproduce it, is in the
examples repository: <a class="reference external" href="https://github.com/conan-io/examples">https://github.com/conan-io/examples</a>. You can go step by step
reproducing this example while reading the below documentation.</p>
<div class="code bash last highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/conan-io/examples.git
$ cd features/lockfiles/intro
# $ python build.py only to run the full example, but better go step by step
</pre></div>
</div>
</div>
<p>Lets start in the <em>features/lockfiles/intro</em> of the examples repository, remove the previous packages,
and create both release and debug <code class="docutils literal notranslate"><span class="pre">pkga</span></code> packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>remove<span class="w"> </span><span class="s2">&quot;pkg*&quot;</span><span class="w"> </span>-f
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>pkga<span class="w"> </span>pkga/0.1@user/testing
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>pkga<span class="w"> </span>pkga/0.1@user/testing<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
</pre></div>
</div>
<p>Now, we could (don’t do it) create 2 different lockfiles, one for each configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># DO NOT type these commands, we&#39;ll do it better below</span>
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>pkgb
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>--user<span class="o">=</span>user<span class="w"> </span>--channel<span class="o">=</span>testing<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_release.lock
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>--user<span class="o">=</span>user<span class="w"> </span>--channel<span class="o">=</span>testing<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_debug.lock<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The dependency graph is different for each different configuration/profile. Not only the package-ids, but also because of
conditional requirements, the dependencies can be different. Then, it is necessary to create a lockfile for every different
configuration/profile.</p>
</div>
<p>But, what if a new <code class="docutils literal notranslate"><span class="pre">pkga/0.2&#64;user/testing</span></code> version was created in the time between both commands? Although this is unlikely to happen in this
example, because everything is local. However, it could happen that <code class="docutils literal notranslate"><span class="pre">pkga</span></code> was in a server and the CI uploads a new <code class="docutils literal notranslate"><span class="pre">pkga/0.2&#64;user/testing</span></code>
version while we are running the above commands.</p>
<div class="section" id="base-lockfiles">
<h2>Base lockfiles<a class="headerlink" href="#base-lockfiles" title="Permalink to this headline">¶</a></h2>
<p>Conan proposes a “base” lockfile, with the <strong class="command">--base</strong> argument, that will capture only the versions and topology of the
graph, but not the package-ids:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>pkgb
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>--user<span class="o">=</span>user<span class="w"> </span>--channel<span class="o">=</span>testing<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_base.lock<span class="w"> </span>--base
</pre></div>
</div>
<p>Let’s inspect the <em>locks/pkgb_base.lock</em> lockfile:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;graph_lock&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pkgb/0.1@user/testing&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;requires&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;..\\conanfile.py&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;context&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;host&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pkga/0.1@user/testing&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;context&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;host&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;revisions_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.4&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This lockfile is different to the ones in the previous section. It does not store the <code class="docutils literal notranslate"><span class="pre">profile</span></code>, and it does not capture
the package-ids or the options of the nodes. It captures the topology of the graph, and the package references and versions.</p>
<p>At this point, the new <code class="docutils literal notranslate"><span class="pre">pkga/0.2&#64;user/testing</span></code> version packages could be created:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
<span class="c1"># The recipe generates different package code depending on the version, automatically</span>
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>pkga<span class="w"> </span>pkga/0.2@user/testing
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>pkga<span class="w"> </span>pkga/0.2@user/testing<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
</pre></div>
</div>
<p>Using the “base” <em>locks/pkgb_base.lock</em> lockfile, now we can obtain a new lockfile for both debug and release configurations, and
it is guaranteed that both will use the <code class="docutils literal notranslate"><span class="pre">pkga/0.1&#64;user/testing</span></code> dependency, and not the new one:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>pkgb
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>--user<span class="o">=</span>user<span class="w"> </span>--channel<span class="o">=</span>testing<span class="w"> </span>--lockfile<span class="o">=</span>locks/pkgb_base.lock<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_deps_debug.lock<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>--user<span class="o">=</span>user<span class="w"> </span>--channel<span class="o">=</span>testing<span class="w"> </span>--lockfile<span class="o">=</span>locks/pkgb_base.lock<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_deps_release.lock
</pre></div>
</div>
<p>Now, we will have 2 lockfiles, <em>locks/pkgb_deps_debug.lock</em> and <em>locks/pkgb_deps_release.lock</em>. Each one will lock different profiles and different package-id
of <code class="docutils literal notranslate"><span class="pre">pkga/0.1&#64;user/testing</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In Conan 1.X, if you are generating lockfiles with separate build and host profiles, your base lockfiles must also use separate build and host profiles.
For example, here we are generating a base lockfile that will be used to generate lockfiles for a Linux and Windows build:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># The build and host profiles you choose for the base lockfile should</span>
<span class="c1"># include all dependencies needed by all lockfiles you will generate</span>
<span class="c1"># from the base lockfile.</span>
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>-pr:b<span class="w"> </span>release<span class="w"> </span>-pr:h<span class="w"> </span>debug<span class="w"> </span>--lockfile-out<span class="o">=</span>base.lock<span class="w"> </span>--base

<span class="c1"># Use the base lockfile to generate lockfiles for a Linux and Windows</span>
<span class="c1"># build.</span>
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>-pr:b<span class="w"> </span>linux-rel<span class="w"> </span>-pr:h<span class="w"> </span>linux-dbg<span class="w"> </span>--lockfile<span class="o">=</span>base.lock<span class="w"> </span>--lockfile-out<span class="o">=</span>linux.lock
$<span class="w"> </span>conan<span class="w"> </span>lock<span class="w"> </span>create<span class="w"> </span>conanfile.py<span class="w"> </span>-pr:b<span class="w"> </span>windows-rel<span class="w"> </span>-pr:h<span class="w"> </span>windows-dbg<span class="w"> </span>--lockfile<span class="o">=</span>base.lock<span class="w"> </span>--lockfile-out<span class="o">=</span>windows.lock
</pre></div>
</div>
<p class="last">For more information, please see <a class="reference external" href="https://github.com/conan-io/conan/issues/9446#issuecomment-904846681">GitHub issue #9446</a>.</p>
</div>
</div>
<div class="section" id="locked-configuration">
<h2>Locked configuration<a class="headerlink" href="#locked-configuration" title="Permalink to this headline">¶</a></h2>
<p>The lockfiles store the effective configuration, settings, options, resulting from the used profiles and command line arguments.
That configuration arguments can be passed to the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">lock</span> <span class="pre">create</span></code> command, but not when using lockfiles. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..<span class="w"> </span>--lockfile<span class="o">=</span>../locks/pkgb_deps_debug.lock<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
ERROR:<span class="w"> </span>Cannot<span class="w"> </span>use<span class="w"> </span>profile,<span class="w"> </span>settings,<span class="w"> </span>options<span class="w"> </span>or<span class="w"> </span>env<span class="w"> </span><span class="s1">&#39;host&#39;</span><span class="w"> </span>when<span class="w"> </span>using<span class="w"> </span>lockfile
</pre></div>
</div>
<p>results in an error, because the <em>locks/pkgb_deps_debug.lock</em> already stores the <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code> and passing it in the command line
could only result in inconsistencies and errors.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Lockfiles store the full effective profile configuration. It is not possible to pass configuration, settings, options or
profile arguments when using lockfiles (only when creating the lockfiles)</p>
</div>
<p>With the two captured lockfiles, now we can locally build and run our <code class="docutils literal notranslate"><span class="pre">pkgb</span></code> application for both configurations, guaranteeing
the dependency to <code class="docutils literal notranslate"><span class="pre">pkga/0.1&#64;user/testing</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..<span class="w"> </span>--lockfile<span class="o">=</span>../locks/pkgb_deps_release.lock
$<span class="w"> </span>cmake<span class="w"> </span>../src<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15 Win64&quot;</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
$<span class="w"> </span>./bin/greet
HelloA<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>Release
HelloB<span class="w"> </span>Release!
Greetings<span class="w"> </span>Release!
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..<span class="w"> </span>--lockfile<span class="o">=</span>../locks/pkgb_deps_debug.lock
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Debug
$<span class="w"> </span>./bin/greet
HelloA<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>Debug
HelloB<span class="w"> </span>Debug!
Greetings<span class="w"> </span>Debug!
</pre></div>
</div>
<p>We can create <code class="docutils literal notranslate"><span class="pre">pkgb</span></code> package again for both configurations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>user/testing<span class="w"> </span>--lockfile<span class="o">=</span>locks/pkgb_deps_release.lock<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_release.lock
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>user/testing<span class="w"> </span>--lockfile<span class="o">=</span>locks/pkgb_deps_debug.lock<span class="w"> </span>--lockfile-out<span class="o">=</span>locks/pkgb_debug.lock
</pre></div>
</div>
<p>And we could still use the lockfiles later in time to install the <code class="docutils literal notranslate"><span class="pre">pkgb</span></code> package with the same dependencies
and configuration that were used to create that package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
$<span class="w"> </span>mkdir<span class="w"> </span>consume
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>consume
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>pkgb/0.1@user/testing<span class="w"> </span>--lockfile<span class="o">=</span>../pkgb/locks/pkgb_release.lock
$<span class="w"> </span>./bin/greet
HelloA<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>Release
HelloB<span class="w"> </span>Release!
Greetings<span class="w"> </span>Release!
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>pkgb/0.1@user/testing<span class="w"> </span>--lockfile<span class="o">=</span>../pkgb/locks/pkgb_debug.lock
$<span class="w"> </span>./bin/greet
HelloA<span class="w"> </span><span class="m">0</span>.1<span class="w"> </span>Debug
HelloB<span class="w"> </span>Debug!
Greetings<span class="w"> </span>Debug!
</pre></div>
</div>
<p>As you can see, the immutability principle remains. If we try to use <em>pkgb_release.lock</em> to create the <code class="docutils literal notranslate"><span class="pre">pkgb</span></code> package
again instead of the <em>pkgb_deps_release.lock</em> lockfile, it will error, as <code class="docutils literal notranslate"><span class="pre">pkgb</span></code> would be already fully
locked in the former.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="evolving.html" class="btn btn-neutral float-right" title="Evolving lockfiles" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2022, JFrog.
      Last updated on May 11, 2023.
      <span><a href="#" class="ot-sdk-show-settings">Cookies Settings</a></span>
    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <!--<span class="fa fa-pencil-square-o"> Other versions:</span> -->
      Version: 1.48
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
            
                <dd><a href="/2.0/index.html">2.0</a></dd>
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
            
                <dd><a href="/2/index.html">2</a></dd>
                   
        
        <br>
        
                   
        
            
                <dd><a href="/1/index.html">1</a></dd>
                   
        
            
                <dd><a href="/en/1.60/index.html">1.60</a></dd>
                   
        
            
                <dd><a href="/en/1.59/index.html">1.59</a></dd>
                   
        
            
                <dd><a href="/en/1.58/index.html">1.58</a></dd>
                   
        
            
                <dd><a href="/en/1.57/index.html">1.57</a></dd>
                   
        
            
                <dd><a href="/en/1.56/index.html">1.56</a></dd>
                   
        
            
                <dd><a href="/en/1.55/index.html">1.55</a></dd>
                   
        
            
                <dd><a href="/en/1.54/index.html">1.54</a></dd>
                   
        
            
                <dd><a href="/en/1.53/index.html">1.53</a></dd>
                   
        
            
                <dd><a href="/en/1.52/index.html">1.52</a></dd>
                   
        
            
                <dd><a href="/en/1.51/index.html">1.51</a></dd>
                   
        
            
                <dd><a href="/en/1.50/index.html">1.50</a></dd>
                   
        
            
                <dd><a href="/en/1.49/index.html">1.49</a></dd>
                   
        
            
                <dd><a href="/en/1.48/index.html">1.48</a></dd>
                   
        
            
                <dd><a href="/en/1.47/index.html">1.47</a></dd>
                   
        
            
                <dd><a href="/en/1.46/index.html">1.46</a></dd>
                   
        
            
                <dd><a href="/en/1.45/index.html">1.45</a></dd>
                   
        
            
                <dd><a href="/en/1.44/index.html">1.44</a></dd>
                   
        
            
                <dd><a href="/en/1.43/index.html">1.43</a></dd>
                   
        
            
                <dd><a href="/en/1.42/index.html">1.42</a></dd>
                   
        
            
                <dd><a href="/en/1.41/index.html">1.41</a></dd>
                   
        
            
                <dd><a href="/en/1.40/index.html">1.40</a></dd>
                   
        
            
                <dd><a href="/en/1.39/index.html">1.39</a></dd>
                   
        
            
                <dd><a href="/en/1.38/index.html">1.38</a></dd>
                   
        
            
                <dd><a href="/en/1.37/index.html">1.37</a></dd>
                   
        
            
                <dd><a href="/en/1.36/index.html">1.36</a></dd>
                   
        
            
                <dd><a href="/en/1.35/index.html">1.35</a></dd>
                   
        
            
                <dd><a href="/en/1.34/index.html">1.34</a></dd>
                   
        
            
                <dd><a href="/en/1.33/index.html">1.33</a></dd>
                   
        
            
                <dd><a href="/en/1.32/index.html">1.32</a></dd>
                   
        
            
                <dd><a href="/en/1.31/index.html">1.31</a></dd>
                   
        
            
                <dd><a href="/en/1.30/index.html">1.30</a></dd>
                   
        
            
                <dd><a href="/en/1.29/index.html">1.29</a></dd>
                   
        
            
                <dd><a href="/en/1.28/index.html">1.28</a></dd>
                   
        
            
                <dd><a href="/en/1.27/index.html">1.27</a></dd>
                   
        
            
                <dd><a href="/en/1.26/index.html">1.26</a></dd>
                   
        
            
                <dd><a href="/en/1.25/index.html">1.25</a></dd>
                   
        
            
                <dd><a href="/en/1.24/index.html">1.24</a></dd>
                   
        
            
                <dd><a href="/en/1.23/index.html">1.23</a></dd>
                   
        
            
                <dd><a href="/en/1.22/index.html">1.22</a></dd>
                   
        
            
                <dd><a href="/en/1.21/index.html">1.21</a></dd>
                   
        
            
                <dd><a href="/en/1.20/index.html">1.20</a></dd>
                   
        
            
                <dd><a href="/en/1.19/index.html">1.19</a></dd>
                   
        
            
                <dd><a href="/en/1.18/index.html">1.18</a></dd>
                   
        
            
                <dd><a href="/en/1.17/index.html">1.17</a></dd>
                   
        
            
                <dd><a href="/en/1.16/index.html">1.16</a></dd>
                   
        
            
                <dd><a href="/en/1.15/index.html">1.15</a></dd>
                   
        
            
                <dd><a href="/en/1.14/index.html">1.14</a></dd>
                   
        
            
                <dd><a href="/en/1.13/index.html">1.13</a></dd>
                   
        
            
                <dd><a href="/en/1.12/index.html">1.12</a></dd>
                   
        
            
                <dd><a href="/en/1.11/index.html">1.11</a></dd>
                   
        
            
                <dd><a href="/en/1.10/index.html">1.10</a></dd>
                   
        
            
                <dd><a href="/en/1.9/index.html">1.9</a></dd>
                   
        
            
                <dd><a href="/en/1.8/index.html">1.8</a></dd>
                   
        
            
                <dd><a href="/en/1.7/index.html">1.7</a></dd>
                   
        
            
                <dd><a href="/en/1.6/index.html">1.6</a></dd>
                   
        
            
                <dd><a href="/en/1.5/index.html">1.5</a></dd>
                   
        
            
                <dd><a href="/en/1.4/index.html">1.4</a></dd>
                   
        
            
                <dd><a href="/en/1.3/index.html">1.3</a></dd>
                   
        
                   
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.48/conan.pdf">PDF</a></dd>
               
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.48.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.48");
  </script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>