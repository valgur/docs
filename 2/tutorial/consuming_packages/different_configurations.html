



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building for multiple configurations: Release, Debug, Static and Shared &mdash; conan 2.0.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../_static/css/search.css" type="text/css" />
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="conan 2.0.4 documentation" href="../../index.html"/>
        <link rel="up" title="Consuming packages" href="../consuming_packages.html"/>
        <link rel="next" title="Understanding the flexibility of using conanfile.py vs conanfile.txt" href="the_flexibility_of_conanfile_py.html"/>
        <link rel="prev" title="Using build tools as Conan packages" href="use_tools_as_conan_packages.html"/>

 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
 



</script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/conan-docs-logo-2.svg" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../consuming_packages.html">Consuming packages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="build_simple_cmake_project.html">Build a simple CMake project using Conan</a></li>
<li class="toctree-l3"><a class="reference internal" href="use_tools_as_conan_packages.html">Using build tools as Conan packages</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Building for multiple configurations: Release, Debug, Static and Shared</a></li>
<li class="toctree-l3"><a class="reference internal" href="the_flexibility_of_conanfile_py.html">Understanding the flexibility of using conanfile.py vs conanfile.txt</a></li>
<li class="toctree-l3"><a class="reference internal" href="cross_building_with_conan.html">How to cross-compile your applications using Conan: host and build contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro_to_versioning.html">Introduction to versioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../creating_packages.html">Creating packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_repositories.html">Working with Conan repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_packages.html">Developing packages locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_features.html">Other important Conan features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p><a href="https://conan.io/#signUp" target="_blank">Sign up for release updates</a></p>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
                 
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../tutorial.html">Tutorial</a> &raquo;</li>
        
          <li><a href="../consuming_packages.html">Consuming packages</a> &raquo;</li>
        
      <li>Building for multiple configurations: Release, Debug, Static and Shared</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/develop2/tutorial/consuming_packages/different_configurations.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->
          <!--<div class="admonition important">
            <p class="admonition-title">Announcement</p>
            <p>Recipe Hacking no. 2! Building on what we learnt during the first installment we will be working on more Conan 2.0 Migration! We'll start by reviewing some open pull requests and hopefully tackle a CMake example. <a
            href=https://jfrog.zoom.us/webinar/register/WN_grFhqH0yRBeIfJmBvQoPJw> Register here to attend.</a></p>
          </div>-->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-for-multiple-configurations-release-debug-static-and-shared">
<span id="consuming-packages-different-configurations"></span><h1>Building for multiple configurations: Release, Debug, Static and Shared<a class="headerlink" href="#building-for-multiple-configurations-release-debug-static-and-shared" title="Permalink to this headline">¶</a></h1>
<p>Please, first clone the sources to recreate this project. You can find them in the
<a class="reference external" href="https://github.com/conan-io/examples2">examples2.0 repository</a> in GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/tutorial/consuming_packages/different_configurations
</pre></div>
</div>
<p>So far, we built a simple CMake project that depended on the <strong>zlib</strong> library and learned
about <code class="docutils literal notranslate"><span class="pre">tool_requires</span></code>, a special type or requirements for build-tools like CMake. In
both cases, we did not specify anywhere that we wanted to build the application in
<em>Release</em> or <em>Debug</em> mode, or if we wanted to link against <em>static</em> or <em>shared</em> libraries.
That is because Conan, if not instructed otherwise, will use a default configuration
declared in the ‘default profile’. This default profile was created in the first example
when we run the <strong class="command">conan profile detect</strong> command. Conan stores this file in the
<strong>/profiles</strong> folder, located in the Conan user home. You can check the contents of your
default profile by running the <strong class="command">conan config home</strong> command to get the location of the
Conan user home and then showing the contents of the default profile in the <strong>/profiles</strong>
folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>config<span class="w"> </span>home
Current<span class="w"> </span>Conan<span class="w"> </span>home:<span class="w"> </span>/Users/tutorial_user/.conan2

<span class="c1"># output the file contents</span>
$<span class="w"> </span>cat<span class="w"> </span>/Users/tutorial_user/.conan2/profiles/default
<span class="o">[</span>settings<span class="o">]</span>
<span class="nv">os</span><span class="o">=</span>Macos
<span class="nv">arch</span><span class="o">=</span>x86_64
<span class="nv">compiler</span><span class="o">=</span>apple-clang
compiler.version<span class="o">=</span><span class="m">14</span>.0
compiler.libcxx<span class="o">=</span>libc++
compiler.cppstd<span class="o">=</span>gnu11
<span class="nv">build_type</span><span class="o">=</span>Release
<span class="o">[</span>options<span class="o">]</span>
<span class="o">[</span>tool_requires<span class="o">]</span>
<span class="o">[</span>env<span class="o">]</span>
</pre></div>
</div>
<p>As you can see, the profile has different sections. The <code class="docutils literal notranslate"><span class="pre">[settings]</span></code> section is the one
that has information about things like the operating system, architecture, compiler, and
build configuration. When you call a Conan command setting the <code class="docutils literal notranslate"><span class="pre">--profile</span></code> argument,
Conan will take all the information from the profile and apply it to the packages you want
to build or install. If you don’t specify that argument it’s equivalent to call it with
<code class="docutils literal notranslate"><span class="pre">--profile=default</span></code>. These two commands will behave the same:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--build<span class="o">=</span>missing
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--build<span class="o">=</span>missing<span class="w"> </span>--profile<span class="o">=</span>default
</pre></div>
</div>
<p>You can store different profiles and use them to build for different settings. For example,
to use a <code class="docutils literal notranslate"><span class="pre">build_type=Debug</span></code>, or adding a <code class="docutils literal notranslate"><span class="pre">tool_requires</span></code> to all the packages you build
with that profile. One example of a <em>debug</em> profile could be:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">&lt;conan home&gt;/profiles/debug</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>settings<span class="o">]</span>
<span class="nv">os</span><span class="o">=</span>Macos
<span class="nv">arch</span><span class="o">=</span>x86_64
<span class="nv">compiler</span><span class="o">=</span>apple-clang
compiler.version<span class="o">=</span><span class="m">14</span>.0
compiler.libcxx<span class="o">=</span>libc++
compiler.cppstd<span class="o">=</span>gnu11
<span class="hll"><span class="nv">build_type</span><span class="o">=</span>Debug
</span></pre></div>
</div>
</div>
<div class="section" id="modifying-settings-use-debug-configuration-for-the-application-and-its-dependencies">
<span id="different-configurations-modify-settings"></span><h2>Modifying settings: use Debug configuration for the application and its dependencies<a class="headerlink" href="#modifying-settings-use-debug-configuration-for-the-application-and-its-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Using profiles is not the only way to set the configuration you want to use. You can also
override the profile settings in the Conan command using the <code class="docutils literal notranslate"><span class="pre">--settings</span></code> argument. For
example, you can build the project from the previous examples in <em>Debug</em> configuration
instead of <em>Release</em>.</p>
<p>Before building, please check that we modified the source code from the previous example to show the build configuration the
sources were built with:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="p">...</span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="hll"><span class="w">    </span><span class="cp">#ifdef NDEBUG</span>
</span><span class="hll"><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Release configuration!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class="hll"><span class="w">    </span><span class="cp">#else</span>
</span><span class="hll"><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Debug configuration!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class="hll"><span class="w">    </span><span class="cp">#endif</span>
</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now let’s build our project for <em>Debug</em> configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--output-folder<span class="o">=</span>build<span class="w"> </span>--build<span class="o">=</span>missing<span class="w"> </span>--settings<span class="o">=</span><span class="nv">build_type</span><span class="o">=</span>Debug
</pre></div>
</div>
<p>As we explained above, this is the equivalent of having <em>debug</em> profile and running these
command using the <code class="docutils literal notranslate"><span class="pre">--profile=debug</span></code> argument instead of the
<code class="docutils literal notranslate"><span class="pre">--settings=build_type=Debug</span></code> argument.</p>
<p>This <strong class="command">conan install</strong> command will check if we already installed the required libraries
(Zlib) in Debug configuration and install them otherwise. It will also set the build
configuration in the <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> toolchain that the CMakeToolchain generator
creates so that when we build the application it’s built in <em>Debug</em> configuration. Now
build your project as you did in the previous examples and check in the output how it was
built in <em>Debug</em> configuration:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># assuming Visual Studio 15 2017 is your VS version and that it matches your default profile</span>
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15 2017&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Debug
$<span class="w"> </span>Debug<span class="se">\c</span>ompressor.exe
Uncompressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">233</span>
Compressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">147</span>
<span class="hll">ZLIB<span class="w"> </span>VERSION:<span class="w"> </span><span class="m">1</span>.2.11
</span>Debug<span class="w"> </span>configuration!
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Linux, macOS</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
$<span class="w"> </span>./compressor
Uncompressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">233</span>
Compressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">147</span>
<span class="hll">ZLIB<span class="w"> </span>VERSION:<span class="w"> </span><span class="m">1</span>.2.11
</span>Debug<span class="w"> </span>configuration!
</pre></div>
</div>
</div>
</div>
<div class="section" id="modifying-options-linking-the-application-dependencies-as-shared-libraries">
<span id="different-configurations-modify-options"></span><h2>Modifying options: linking the application dependencies as shared libraries<a class="headerlink" href="#modifying-options-linking-the-application-dependencies-as-shared-libraries" title="Permalink to this headline">¶</a></h2>
<p>So far, we have been linking <em>Zlib</em> statically in our application. That’s because in the
Zlib’s Conan package there’s an attribute set to build in that mode by default. We can
change from <strong>static</strong> to <strong>shared</strong> linking by setting the <code class="docutils literal notranslate"><span class="pre">shared</span></code> option to <code class="docutils literal notranslate"><span class="pre">True</span></code>
using the <code class="docutils literal notranslate"><span class="pre">--options</span></code> argument. To do so, please run:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--output-folder<span class="o">=</span>build<span class="w"> </span>--build<span class="o">=</span>missing<span class="w"> </span>--options<span class="o">=</span>zlib/1.2.11:shared<span class="o">=</span>True
</pre></div>
</div>
</div>
<p>Doing this, Conan will install the <em>Zlib</em> shared libraries, generate the files to build with
them and, also the necessary files to locate those dynamic libraries when running the
application. Let’s build the application again after configuring it to link <em>Zlib</em> as a
shared library:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="c1"># assuming Visual Studio 15 2017 is your VS version and that it matches your default profile</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15 2017&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
...
<span class="o">[</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>Built<span class="w"> </span>target<span class="w"> </span>compressor
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Linux, Macos</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
...
<span class="o">[</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>Built<span class="w"> </span>target<span class="w"> </span>compressor
</pre></div>
</div>
</div>
<p>Now, if you try to run the compiled executable you will see an error because the
executable can’t find the shared libraries for <em>Zlib</em> that we just installed.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>Release<span class="se">\c</span>ompressor.exe
<span class="o">(</span>on<span class="w"> </span>a<span class="w"> </span>pop-up<span class="w"> </span>window<span class="o">)</span><span class="w"> </span>The<span class="w"> </span>code<span class="w"> </span>execution<span class="w"> </span>cannot<span class="w"> </span>proceed<span class="w"> </span>because<span class="w"> </span>zlib1.dll<span class="w"> </span>was<span class="w"> </span>not<span class="w"> </span>found.<span class="w"> </span>Reinstalling<span class="w"> </span>the<span class="w"> </span>program<span class="w"> </span>may<span class="w"> </span>fix<span class="w"> </span>this<span class="w"> </span>problem.
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Linux, Macos</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./compressor
./compressor:<span class="w"> </span>error<span class="w"> </span><span class="k">while</span><span class="w"> </span>loading<span class="w"> </span>shared<span class="w"> </span>libraries:<span class="w"> </span>libz.so.1:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</pre></div>
</div>
</div>
<p>This is because shared libraries (<em>.dll</em> in windows, <em>.dylib</em> in OSX and <em>.so</em> in Linux),
are loaded at runtime. That means that the application executable needs to know where are
the required shared libraries when it runs. On Windows, the dynamic linker will search in
the same directory then in the <em>PATH</em> directories. On OSX, it will search in the
directories declared in <em>DYLD_LIBRARY_PATH</em> as on Linux will use the <em>LD_LIBRARY_PATH</em>.</p>
<p>Conan provides a mechanism to define those variables and make it possible, for executables, to
find and load these shared libraries. This mechanism is the <code class="docutils literal notranslate"><span class="pre">VirtualRunEnv</span></code> generator.
If you check the output folder you will see that Conan generated a new file called
<code class="docutils literal notranslate"><span class="pre">conanrun.sh/bat</span></code>. This is the result of automatically invoking that <code class="docutils literal notranslate"><span class="pre">VirtualRunEnv</span></code>
generator when we activated the <code class="docutils literal notranslate"><span class="pre">shared</span></code> option when doing the <strong class="command">conan install</strong>. This
generated script will set the <strong>PATH</strong>, <strong>LD_LIBRARY_PATH</strong>, <strong>DYLD_LIBRARY_PATH</strong> and
<strong>DYLD_FRAMEWORK_PATH</strong> environment variables so that executables can find the shared
libraries.</p>
<p>Activate the virtual environment, and run the executables again:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conanrun.bat
$<span class="w"> </span>Release<span class="se">\c</span>ompressor.exe
Uncompressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">233</span>
Compressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">147</span>
...
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Linux, macOS</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>conanrun.sh
$<span class="w"> </span>./compressor
Uncompressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">233</span>
Compressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">147</span>
...
</pre></div>
</div>
</div>
<p>Just as in the previous example with the <code class="docutils literal notranslate"><span class="pre">VirtualBuildEnv</span></code> generator, when we run the
<code class="docutils literal notranslate"><span class="pre">conanrun.sh/bat</span></code> script a deactivation script called <code class="docutils literal notranslate"><span class="pre">deactivate_conanrun.sh/bat</span></code> is
created to restore the environment. Source or run it to do so:</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>deactivate_conanrun.bat
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Linux, macOS</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>deactivate_conanrun.sh
</pre></div>
</div>
</div>
</div>
<div class="section" id="difference-between-settings-and-options">
<span id="settings-and-options-difference"></span><h2>Difference between settings and options<a class="headerlink" href="#difference-between-settings-and-options" title="Permalink to this headline">¶</a></h2>
<p>You may have noticed that for changing between <em>Debug</em> and <em>Release</em> configuration we
used a Conan <strong>setting</strong>, but when we set <em>shared</em> mode for our executable we used a
Conan <strong>option</strong>. Please, note the difference between <strong>settings</strong> and <strong>options</strong>:</p>
<ul class="simple">
<li><strong>settings</strong> are typically a project-wide configuration defined by the client machine.
Things like the operating system, compiler or build configuration that will be common to
several Conan packages and would not make sense to define one default value for only one
of them. For example, it doesn’t make sense for a Conan package to declare “Visual
Studio” as a default compiler because that is something defined by the end consumer, and
unlikely to make sense if they are working in Linux.</li>
<li><strong>options</strong> are intended for package-specific configuration that can be set to a default
value in the recipe. For example, one package can define that its default linkage is
static, and this is the linkage that should be used if consumers don’t specify
otherwise.</li>
</ul>
</div>
<div class="section" id="read-more">
<h2>Read more<a class="headerlink" href="#read-more" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../reference/tools/env/virtualrunenv.html#conan-tools-env-virtualrunenv"><span class="std std-ref">VirtualRunEnv reference</span></a></li>
<li><a class="reference internal" href="cross_building_with_conan.html#consuming-packages-cross-building-with-conan"><span class="std std-ref">Cross-compiling using –profile:build and –profile:host</span></a></li>
<li>Installing configurations with conan config install</li>
<li>VS Multi-config</li>
<li>Example about how settings and options influence the package id</li>
<li>Using patterns for settings and options</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="the_flexibility_of_conanfile_py.html" class="btn btn-neutral float-right" title="Understanding the flexibility of using conanfile.py vs conanfile.txt" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="use_tools_as_conan_packages.html" class="btn btn-neutral" title="Using build tools as Conan packages" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2023, JFrog.
      Last updated on Apr 21, 2023.
      <span><a href="#" class="ot-sdk-show-settings">Cookies Settings</a></span>
    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <!--<span class="fa fa-pencil-square-o"> Other versions:</span> -->
      Version: 2.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
            
                <dd><a href="/2.0/index.html">2.0</a></dd>
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
                   
        
            
                <dd><a href="/2/index.html">2</a></dd>
                   
        
        <br>
        
                   
        
            
                <dd><a href="/1/index.html">1</a></dd>
                   
        
            
                <dd><a href="/en/1.59/index.html">1.59</a></dd>
                   
        
            
                <dd><a href="/en/1.58/index.html">1.58</a></dd>
                   
        
            
                <dd><a href="/en/1.57/index.html">1.57</a></dd>
                   
        
            
                <dd><a href="/en/1.56/index.html">1.56</a></dd>
                   
        
            
                <dd><a href="/en/1.55/index.html">1.55</a></dd>
                   
        
            
                <dd><a href="/en/1.54/index.html">1.54</a></dd>
                   
        
            
                <dd><a href="/en/1.53/index.html">1.53</a></dd>
                   
        
            
                <dd><a href="/en/1.52/index.html">1.52</a></dd>
                   
        
            
                <dd><a href="/en/1.51/index.html">1.51</a></dd>
                   
        
            
                <dd><a href="/en/1.50/index.html">1.50</a></dd>
                   
        
            
                <dd><a href="/en/1.49/index.html">1.49</a></dd>
                   
        
            
                <dd><a href="/en/1.48/index.html">1.48</a></dd>
                   
        
            
                <dd><a href="/en/1.47/index.html">1.47</a></dd>
                   
        
            
                <dd><a href="/en/1.46/index.html">1.46</a></dd>
                   
        
            
                <dd><a href="/en/1.45/index.html">1.45</a></dd>
                   
        
            
                <dd><a href="/en/1.44/index.html">1.44</a></dd>
                   
        
            
                <dd><a href="/en/1.43/index.html">1.43</a></dd>
                   
        
            
                <dd><a href="/en/1.42/index.html">1.42</a></dd>
                   
        
            
                <dd><a href="/en/1.41/index.html">1.41</a></dd>
                   
        
            
                <dd><a href="/en/1.40/index.html">1.40</a></dd>
                   
        
            
                <dd><a href="/en/1.39/index.html">1.39</a></dd>
                   
        
            
                <dd><a href="/en/1.38/index.html">1.38</a></dd>
                   
        
            
                <dd><a href="/en/1.37/index.html">1.37</a></dd>
                   
        
            
                <dd><a href="/en/1.36/index.html">1.36</a></dd>
                   
        
            
                <dd><a href="/en/1.35/index.html">1.35</a></dd>
                   
        
            
                <dd><a href="/en/1.34/index.html">1.34</a></dd>
                   
        
            
                <dd><a href="/en/1.33/index.html">1.33</a></dd>
                   
        
            
                <dd><a href="/en/1.32/index.html">1.32</a></dd>
                   
        
            
                <dd><a href="/en/1.31/index.html">1.31</a></dd>
                   
        
            
                <dd><a href="/en/1.30/index.html">1.30</a></dd>
                   
        
            
                <dd><a href="/en/1.29/index.html">1.29</a></dd>
                   
        
            
                <dd><a href="/en/1.28/index.html">1.28</a></dd>
                   
        
            
                <dd><a href="/en/1.27/index.html">1.27</a></dd>
                   
        
            
                <dd><a href="/en/1.26/index.html">1.26</a></dd>
                   
        
            
                <dd><a href="/en/1.25/index.html">1.25</a></dd>
                   
        
            
                <dd><a href="/en/1.24/index.html">1.24</a></dd>
                   
        
            
                <dd><a href="/en/1.23/index.html">1.23</a></dd>
                   
        
            
                <dd><a href="/en/1.22/index.html">1.22</a></dd>
                   
        
            
                <dd><a href="/en/1.21/index.html">1.21</a></dd>
                   
        
            
                <dd><a href="/en/1.20/index.html">1.20</a></dd>
                   
        
            
                <dd><a href="/en/1.19/index.html">1.19</a></dd>
                   
        
            
                <dd><a href="/en/1.18/index.html">1.18</a></dd>
                   
        
            
                <dd><a href="/en/1.17/index.html">1.17</a></dd>
                   
        
            
                <dd><a href="/en/1.16/index.html">1.16</a></dd>
                   
        
            
                <dd><a href="/en/1.15/index.html">1.15</a></dd>
                   
        
            
                <dd><a href="/en/1.14/index.html">1.14</a></dd>
                   
        
            
                <dd><a href="/en/1.13/index.html">1.13</a></dd>
                   
        
            
                <dd><a href="/en/1.12/index.html">1.12</a></dd>
                   
        
            
                <dd><a href="/en/1.11/index.html">1.11</a></dd>
                   
        
            
                <dd><a href="/en/1.10/index.html">1.10</a></dd>
                   
        
            
                <dd><a href="/en/1.9/index.html">1.9</a></dd>
                   
        
            
                <dd><a href="/en/1.8/index.html">1.8</a></dd>
                   
        
            
                <dd><a href="/en/1.7/index.html">1.7</a></dd>
                   
        
            
                <dd><a href="/en/1.6/index.html">1.6</a></dd>
                   
        
            
                <dd><a href="/en/1.5/index.html">1.5</a></dd>
                   
        
            
                <dd><a href="/en/1.4/index.html">1.4</a></dd>
                   
        
            
                <dd><a href="/en/1.3/index.html">1.3</a></dd>
                   
        
                   
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/2.0/conan.pdf">PDF</a></dd> 
               
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.0.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("2.0");
  </script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>